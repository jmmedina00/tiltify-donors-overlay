(this["webpackJsonptiltify-donors-overlay"]=this["webpackJsonptiltify-donors-overlay"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),i=n(18),o=n.n(i),s=(n(42),n(26)),u=n(11),l=(n(43),n(10)),d={dollar:"$",euro:"\u20ac"},j=Object(l.b)((function(e){var t=e.currency,n=e.swap;return{currency:d[t||"dollar"],swap:n}}))((function(e){var t=e.currency,n=e.swap,c=e.children,a=[Object(r.jsx)("div",{className:"amount",children:c},"0"),Object(r.jsx)("div",{className:"currency",children:t},"1")];return n&&a.reverse(),Object(r.jsx)("div",{className:"amount-display",children:a})})),b=function(e){var t=e.amount,n=e.name;return Object(r.jsxs)("div",{className:"donation",children:[Object(r.jsx)("div",{className:"donor",children:n}),Object(r.jsx)(j,{children:t.toFixed(2)})]})},h=function(e){var t=e.donations$,n=Object(c.useState)({donations:[]}),a=Object(s.a)(n,2),i=a[0],o=a[1];if(Object(c.useEffect)((function(){var e=t.subscribe((function(e){return o({donations:e})}),(function(e){return o({error:!0})}));return function(){e.unsubscribe()}}),[t]),i.error)return Object(r.jsx)("p",{children:"Token has been banned."});var u=i.donations.map((function(e){var t=e.id,n=e.amount,c=e.name;return Object(r.jsx)(b,{amount:n,name:c},t)}));return Object(r.jsx)("div",{children:u})},m=n(31),p=n.n(m),O=n(34),f=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,c,a,i,o,s,l,d,j;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="https://tiltify.com",c="/api/v3/campaigns/".concat(n,"/donations?count=100"),a=new Headers({Authorization:"Bearer ".concat(t)}),o=[];case 4:return e.next=6,fetch(r+(i||c),{headers:a});case 6:if((s=e.sent).ok){e.next=9;break}throw new Error("Token has been banned");case 9:return e.next=11,s.json();case 11:l=e.sent,d=l.data,j=l.links.prev,o.push.apply(o,Object(u.a)(d)),i=j;case 16:if(i){e.next=4;break}case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=n(54),v=n(55),g=n(36),y=n(35),k=n(56),w=Object(l.b)((function(e){var t=e.token,n=e.campaign,r=e.test,c=e.highest;return{donations$:r&&"_self"in a.a.createElement("div")?Object(x.a)(5e3).pipe(Object(y.a)((function(e){return new Array(e+1).fill(0).map((function(e,t){return{id:t,name:"Testing",amount:.5*t}}))}))):Object(v.a)(2e3,6e4).pipe(Object(k.a)((function(){return Object(g.a)(f(t,n))})),Object(y.a)((function(e){return e.map((function(e){return{id:e.id,amount:e.amount,name:e.name}}))})),Object(y.a)((function(e){return c?e.sort((function(e,t){var n=e.amount;return t.amount-n})):e})))}}))(h),F=function(e){e.preventDefault();var t=Object(u.a)(new FormData(e.target).entries()).map((function(e){return e.map(encodeURIComponent).join("=")})).join("&"),n="".concat(new URL(document.location).host,"?").concat(t);navigator.clipboard.writeText(n).then((function(){alert("URL has been copied to your clipboard")})).catch((function(e){alert("An error has ocurred"),console.log(e)}))},N=function(){return Object(r.jsx)("div",{className:"vertical-center",children:Object(r.jsx)("div",{className:"horizontal-center",children:Object(r.jsxs)("form",{onSubmit:F,children:[Object(r.jsxs)("div",{className:"generator",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"campaign",children:"Campaign id"}),Object(r.jsx)("input",{type:"text",id:"campaign",name:"campaign"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"token",children:"Access token"}),Object(r.jsx)("input",{type:"text",id:"token",name:"token"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{className:"title",children:"Currency"}),Object(r.jsx)("input",{type:"radio",id:"dollar",name:"currency",value:"dollar"}),Object(r.jsx)("label",{htmlFor:"dollar",children:"$"}),Object(r.jsx)("input",{type:"radio",id:"euro",name:"currency",value:"euro"}),Object(r.jsx)("label",{htmlFor:"euro",children:"\u20ac"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"swap",children:"Currency to the left?"}),Object(r.jsx)("input",{type:"checkbox",id:"swap",name:"swap",defaultChecked:"true"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"highest",children:"Sort by highest amount?"}),Object(r.jsx)("input",{type:"checkbox",id:"highest",name:"highest"})]})]}),Object(r.jsx)("button",{className:"generate-link",children:"Generate link"})]})})})},C="LOAD_PARAMS";var A={loadParams:function(e){return{type:C,data:e}}},L=Object(l.b)(null,A)((function(e){var t=e.loadParams,n=new URL(document.location).searchParams;t(Object(u.a)(n.entries()).reduce((function(e,t){var n=Object(s.a)(t,2),r=n[0],c=n[1];return e[r]=c,e}),{}));var c=n.get("token"),a=n.get("campaign");return c&&a?Object(r.jsx)(w,{}):Object(r.jsx)(N,{})})),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},S=n(20),T=n(32),R={},D=Object(S.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;return t.type===C?Object(T.a)(Object(T.a)({},e),t.data):e}));o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(l.a,{store:D,children:Object(r.jsx)(L,{})})}),document.getElementById("root")),P()}},[[51,1,2]]]);
//# sourceMappingURL=main.5f6a3eda.chunk.js.map